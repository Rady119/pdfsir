(()=>{var e={};e.id=276,e.ids=[276],e.modules={55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},25528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},91877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},25319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},3038:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>l.a,__next_app__:()=>u,originalPathname:()=>p,pages:()=>m,routeModule:()=>x,tree:()=>d});var r=s(73137),o=s(54647),a=s(4183),l=s.n(a),n=s(71775),i={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(i[e]=()=>n[e]);s.d(t,i);let c=r.AppPageRouteModule,d=["",{children:["tools",{children:["convert",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,68276)),"D:\\فلاشة16\\room\\pdf-processor\\src\\app\\tools\\convert\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,21961)),"D:\\فلاشة16\\room\\pdf-processor\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,51918,23)),"next/dist/client/components/not-found-error"]}],m=["D:\\فلاشة16\\room\\pdf-processor\\src\\app\\tools\\convert\\page.tsx"],p="/tools/convert/page",u={require:s,loadChunk:()=>Promise.resolve()},x=new c({definition:{kind:o.x.APP_PAGE,page:"/tools/convert/page",pathname:"/tools/convert",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},330:(e,t,s)=>{Promise.resolve().then(s.bind(s,28169))},28169:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>ConvertPage});var r=s(60080),o=s(91754),a=s(9885);function ConvertPage(){let[e,t]=(0,a.useState)("pdf"),[s,l]=(0,a.useState)(""),[n,i]=(0,a.useState)(0),[c,d]=(0,a.useState)(!1),[m,p]=(0,a.useState)(".jpg,.jpeg,.png"),[u,x]=(0,a.useState)(0),[g,h]=(0,a.useState)(!1),[b,f]=(0,a.useState)(""),[v,j]=(0,a.useState)(!1);(0,a.useEffect)(()=>{let e=parseInt(localStorage.getItem("conversionCount")||"0");x(e),h(e>=3)},[]);let y=[{value:"pdf",label:"PDF from Images",accept:".jpg,.jpeg,.png"},{value:"docx",label:"Word Document (.docx)",accept:".pdf"}];(0,a.useEffect)(()=>{let t=y.find(t=>t.value===e);p(t?.accept||".pdf")},[e]);let handleSubscribe=async e=>{e.preventDefault(),j(!0);try{await new Promise(e=>setTimeout(e,1e3)),localStorage.setItem("isSubscribed","true"),h(!1)}catch(e){l("فشل في الاشتراك. الرجاء المحاولة مرة أخرى.")}finally{j(!1)}},handleConvert=async t=>{if(u>=3&&!localStorage.getItem("isSubscribed")){h(!0);return}d(!0),l(""),i(0);try{let s=new FormData;s.append("file",t),s.append("format",e),s.append("isImageToPdf",String("pdf"===e)),console.log("Starting conversion...",{format:e,fileSize:t.size,fileName:t.name,isImageToPdf:"pdf"===e});let r=new AbortController,o=setTimeout(()=>r.abort(),3e5),a=await fetch("/api/convert",{method:"POST",body:s,headers:{Accept:"application/json"},signal:r.signal}).finally(()=>clearTimeout(o));if(!a.ok){let e=await a.json();throw console.error("API Error:",e),Error(e.error||"حدث خطأ في التحويل")}let l=await a.blob(),n=window.URL.createObjectURL(l),i=document.createElement("a");i.href=n;let c=a.headers.get("content-disposition"),d=c?decodeURIComponent(c.split("filename*=UTF-8''")[1]):`converted.${e}`;i.download=d,document.body.appendChild(i),i.click(),window.URL.revokeObjectURL(n),i.remove();let m=u+1;x(m),localStorage.setItem("conversionCount",m.toString()),m>=3&&!localStorage.getItem("isSubscribed")&&h(!0)}catch(e){console.error("Conversion error:",e),"AbortError"===e.name?l("عملية التحويل استغرقت وقتاً طويلاً. يرجى المحاولة مرة أخرى بملف أصغر حجماً"):e.message.includes("ENOTFOUND")?l("فشل الاتصال بخدمة التحويل. يرجى التحقق من اتصال الإنترنت الخاص بك"):e.message.includes("413")?l("حجم الملف كبير جداً. الحد الأقصى هو 10 ميجابايت"):l(e.message||"حدث خطأ غير متوقع. الرجاء المحاولة مرة أخرى"),setTimeout(()=>l(""),8e3)}finally{d(!1),i(0)}};return(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[r.jsx("nav",{className:"bg-white shadow-sm fixed top-0 left-0 right-0 z-10",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,r.jsxs)("div",{className:"flex justify-between h-16",children:[r.jsx("div",{className:"flex-shrink-0 flex items-center",children:r.jsx("h1",{className:"text-xl font-bold text-gray-800",children:"PDF Tools"})}),r.jsx("div",{className:"flex items-center",children:!localStorage.getItem("isSubscribed")&&(0,r.jsxs)("span",{className:"hidden sm:block text-sm text-gray-600 text-right",dir:"rtl",children:["التحويلات المتبقية: ",3-u]})})]})})}),r.jsx("main",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:(0,r.jsxs)("div",{className:"max-w-xl mx-auto pt-24 sm:pt-28 pb-12",children:[r.jsx("h2",{className:"text-2xl sm:text-3xl font-bold mb-6 sm:mb-8 text-center",children:"pdf"===e?"Convert Images to PDF":"Convert PDF"}),(0,r.jsxs)("div",{className:"mb-6 sm:mb-8",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2 sm:mb-3",children:"pdf"===e?"Convert from:":"Convert to:"}),r.jsx("select",{value:e,onChange:e=>t(e.target.value),className:"w-full px-4 py-2 sm:py-3 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-yellow-300 transition duration-300",disabled:c,children:y.map(e=>r.jsx("option",{value:e.value,children:e.label},e.value))})]}),r.jsx("div",{className:"mb-6 sm:mb-8",children:r.jsx(o.p,{onUpload:handleConvert,options:{type:"convert",settings:{outputFormat:e,isImageToPdf:"pdf"===e}},accept:m,onProgress:e=>{i(e)},isProcessing:c,processingText:`جاري التحويل... ${n}%`})}),s&&r.jsx("div",{className:"mb-6 sm:mb-8",children:r.jsx("div",{className:"p-3 sm:p-4 bg-red-100 text-red-700 rounded-lg text-right",dir:"rtl",children:s})}),g&&r.jsx("div",{className:"mb-6 sm:mb-8",children:(0,r.jsxs)("div",{className:"p-6 sm:p-8 bg-yellow-50 border border-yellow-200 rounded-lg",children:[r.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-4 text-right",children:"لقد استخدمت الحد الأقصى للتحويلات المجانية"}),r.jsx("p",{className:"text-gray-600 mb-4 text-right",children:"للاستمرار في استخدام الخدمة، يرجى الاشتراك عن طريق إدخال بريدك الإلكتروني"}),(0,r.jsxs)("form",{onSubmit:handleSubscribe,className:"space-y-4",children:[r.jsx("input",{type:"email",value:b,onChange:e=>f(e.target.value),placeholder:"البريد الإلكتروني",className:"w-full px-4 py-2 sm:py-3 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-yellow-300",required:!0,dir:"rtl"}),r.jsx("button",{type:"submit",disabled:v,className:"w-full bg-yellow-500 hover:bg-yellow-600 text-white font-bold py-2 sm:py-3 px-4 rounded-lg transition duration-300 disabled:opacity-50",children:v?"جاري الاشتراك...":"اشترك الآن"})]})]})}),!g&&!localStorage.getItem("isSubscribed")&&r.jsx("div",{className:"sm:hidden mb-6",children:(0,r.jsxs)("p",{className:"text-sm text-gray-600 text-center",dir:"rtl",children:["التحويلات المتبقية: ",3-u]})}),(0,r.jsxs)("div",{className:"text-sm text-gray-600 bg-white p-4 sm:p-6 rounded-lg shadow-sm",children:[r.jsx("h2",{className:"font-semibold mb-3 text-lg",children:"Instructions:"}),(0,r.jsxs)("ul",{className:"list-disc list-inside space-y-2",children:[r.jsx("li",{children:"pdf"===e?"Select images (.jpg, .jpeg, .png) to convert to PDF":"Upload a PDF file to convert to the selected format"}),r.jsx("li",{children:"Maximum file size: 10MB"}),r.jsx("li",{children:"The converted file will automatically download once ready"})]})]})]})})]})}},68276:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>l,__esModule:()=>a,default:()=>i});var r=s(17536);let o=(0,r.createProxy)(String.raw`D:\فلاشة16\room\pdf-processor\src\app\tools\convert\page.tsx`),{__esModule:a,$$typeof:l}=o,n=o.default,i=n}};var t=require("../../../webpack-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),s=t.X(0,[650,234,701,754],()=>__webpack_exec__(3038));module.exports=s})();