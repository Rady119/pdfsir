"use strict";(()=>{var e={};e.id=809,e.ids=[809],e.modules={30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},91301:(e,r,t)=>{t.r(r),t.d(r,{headerHooks:()=>h,originalPathname:()=>P,requestAsyncStorage:()=>d,routeModule:()=>c,serverHooks:()=>f,staticGenerationAsyncStorage:()=>l,staticGenerationBailout:()=>m});var o={};t.r(o),t.d(o,{OPTIONS:()=>OPTIONS,POST:()=>POST}),t(95655);var a=t(83323),s=t(54647),n=t(66886),i=t(77198);let p={"Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"POST, OPTIONS","Access-Control-Allow-Headers":"Content-Type","Cache-Control":"no-cache"};async function OPTIONS(){return new Response(null,{headers:p})}async function POST(e){try{let r=await e.formData(),t=r.get("file"),o=r.get("options");if(!t)return n.Z.json({error:"لم يتم تحميل أي ملف"},{status:400,headers:p});if("application/pdf"!==t.type)return n.Z.json({error:"يرجى تحميل ملف PDF صحيح"},{status:400,headers:p});if(t.size>10485760)return n.Z.json({error:"حجم الملف يتجاوز الحد الأقصى (10 ميجابايت)"},{status:413,headers:p});try{JSON.parse(o)}catch{return n.Z.json({error:"خيارات المعالجة غير صالحة"},{status:400,headers:p})}let a=new AbortController,s=setTimeout(()=>a.abort(),3e4);try{let e=await t.arrayBuffer(),r=await i.PDFDocument.load(e,{updateMetadata:!1}),o=await r.save({useObjectStreams:!0,addDefaultPage:!1});return clearTimeout(s),new Response(o,{headers:{...p,"Content-Type":"application/pdf","Content-Disposition":'attachment; filename="processed.pdf"',"Transfer-Encoding":"chunked"}})}catch(e){if(clearTimeout(s),"AbortError"===e.name)throw Error("معالجة الملف استغرقت وقتاً طويلاً");throw e}}catch(e){return console.error("PDF processing error:",e),n.Z.json({error:e.message||"فشلت معالجة ملف PDF. يرجى المحاولة مرة أخرى"},{status:500,headers:p})}}let u=a.AppRouteRouteModule,c=new u({definition:{kind:s.x.APP_ROUTE,page:"/api/pdf/route",pathname:"/api/pdf",filename:"route",bundlePath:"app/api/pdf/route"},resolvedPagePath:"D:\\فلاشة16\\room\\pdf-processor\\src\\app\\api\\pdf\\route.ts",nextConfigOutput:"",userland:o}),{requestAsyncStorage:d,staticGenerationAsyncStorage:l,serverHooks:f,headerHooks:h,staticGenerationBailout:m}=c,P="/api/pdf/route"}};var r=require("../../../webpack-runtime.js");r.C(e);var __webpack_exec__=e=>r(r.s=e),t=r.X(0,[336,922,198],()=>__webpack_exec__(91301));module.exports=t})();