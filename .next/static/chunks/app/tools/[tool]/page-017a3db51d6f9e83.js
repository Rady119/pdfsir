(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[855],{45:function(e,t,r){Promise.resolve().then(r.bind(r,6336))},6336:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return ToolPage}});var a=r(7437),o=r(4033),l=r(2265),n=r(9556),s=r(251),i=r(8342);let showErrorToast=e=>{let t=document.createElement("div");t.style.cssText="\n    position: fixed;\n    top: 20px;\n    right: 20px;\n    background: #f44336;\n    color: white;\n    padding: 16px 24px;\n    border-radius: 4px;\n    z-index: 1000;\n    direction: rtl;\n    opacity: 0;\n    transition: opacity 0.3s ease-in-out;\n    box-shadow: 0 2px 5px rgba(0,0,0,0.2);\n  ",t.textContent=e,document.body.appendChild(t),setTimeout(()=>{t.style.opacity="1"},100),setTimeout(()=>{t.style.opacity="0",setTimeout(()=>document.body.removeChild(t),300)},4700)};function ToolPage(){let e=(0,o.useParams)(),t=null==e?void 0:e.tool;if(!["merge","split","compress","convert"].includes(t))return(0,a.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,a.jsx)("h1",{className:"text-3xl font-bold mb-8 dark:text-white",children:"الأداة غير موجودة"})});let{t:r}=(0,s.$G)(),[d,c]=(0,l.useState)(0),[u,p]=(0,l.useState)(null),[h,g]=(0,l.useState)(()=>{switch(t){case"compress":return{quality:80};case"split":return{pageRange:"1-2"};case"convert":default:return{outputFormat:"docx"};case"merge":return{order:[]}}}),[x,m]=(0,l.useState)([]),[f,b]=(0,l.useState)(1),[y,v]=(0,l.useState)([]),handleUpload=async e=>{p(null);try{if(e.size>10485760)throw Error("حجم الملف يتجاوز الحد الأقصى (10 ميجابايت)");c(10);let r=new FormData;r.append("file",e),"convert"===t&&h&&"outputFormat"in h&&r.append("format",h.outputFormat),c(30);let a=new AbortController,o=setTimeout(()=>a.abort(),6e4);try{let t=await fetch("/api/convert",{method:"POST",body:r,signal:a.signal});if(clearTimeout(o),!t.ok){let e=await t.json();throw Error(e.error||"فشل التحويل")}c(70);let l=await t.blob();if(0===l.size)throw Error("الملف المحول فارغ");c(90);let n=window.URL.createObjectURL(l),s=document.createElement("a");s.style.display="none",s.href=n,s.download=e.name.replace(".pdf",".docx"),document.body.appendChild(s),s.click(),document.body.removeChild(s),window.URL.revokeObjectURL(n),c(100)}catch(e){if("AbortError"===e.name)throw Error("معالجة الملف استغرقت وقتاً طويلاً. الرجاء تجربة ملف أصغر.");throw e}}catch(t){console.error("Processing error:",t),c(0);let e=t.message||"فشل معالجة الملف. الرجاء المحاولة مرة أخرى.";p(e),showErrorToast(e)}};return(0,a.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold mb-8 dark:text-white capitalize",children:r("tools.".concat(t,".title"))}),u&&(0,a.jsx)("div",{className:"mb-4 p-4 bg-red-100 border border-red-400 text-red-700 rounded text-right",children:u}),(0,a.jsx)("div",{className:"mb-8",children:(0,a.jsx)("p",{className:"text-gray-600 dark:text-gray-300 text-right",children:r("tools.".concat(t,".description"))})}),(0,a.jsxs)("div",{className:"relative",children:[d>0&&d<100&&(0,a.jsx)("div",{className:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center z-10 rounded-lg",children:(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-lg text-center",children:[(0,a.jsxs)("div",{className:"text-lg mb-3",children:["جاري التحويل... ",d,"%"]}),(0,a.jsx)("div",{className:"w-64 h-2 bg-gray-200 rounded-full overflow-hidden",children:(0,a.jsx)("div",{className:"h-full bg-blue-500 rounded-full transition-all duration-300 ease-in-out",style:{width:"".concat(d,"%")}})})]})}),(0,a.jsx)(n.p,{onUpload:handleUpload,options:{type:t,settings:h},onProgress:c})]}),(0,a.jsx)(i.m,{files:x,currentPage:f,filesPerPage:5,onPageChange:b,onRemove:e=>m(x.filter((t,r)=>r!==e))})]})}},8342:function(e,t,r){"use strict";r.d(t,{m:function(){return FileList}});var a=r(7437),o=r(2265);function FileList(e){let{files:t,currentPage:r,filesPerPage:l,onPageChange:n,onRemove:s,searchTerm:i="",onSearch:d,sortBy:c="date",onSort:u}=e,[p,h]=(0,o.useState)(i),g=t.filter(e=>e.name.toLowerCase().includes(p.toLowerCase())),x=[...g].sort((e,t)=>{switch(c){case"date":default:return t.lastModified-e.lastModified;case"size":return t.size-e.size}}),m=Math.ceil(x.length/l),f=(r-1)*l,b=x.slice(f,f+l);return(0,a.jsxs)("div",{className:"mt-8",children:[(0,a.jsxs)("div",{className:"mb-4 flex items-center justify-between",children:[(0,a.jsx)("input",{type:"text",placeholder:"Search files...",value:p,onChange:e=>{h(e.target.value),null==d||d(e.target.value)},className:"px-4 py-2 border rounded-lg text-gray-800 dark:text-gray-200 dark:bg-gray-700 dark:border-gray-600"}),(0,a.jsxs)("select",{value:c,onChange:e=>null==u?void 0:u(e.target.value),className:"px-4 py-2 border rounded-lg text-gray-800 dark:text-gray-200 dark:bg-gray-700 dark:border-gray-600",children:[(0,a.jsx)("option",{value:"date",children:"Date"}),(0,a.jsx)("option",{value:"size",children:"Size"})]})]}),b.length>0&&(0,a.jsx)("div",{className:"bg-white dark:bg-gray-700 rounded-lg shadow",children:b.map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 border-b last:border-0 dark:border-gray-600",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)("span",{className:"text-2xl",children:"\uD83D\uDCC4"}),(0,a.jsxs)("p",{className:"text-sm text-gray-500 dark:text-gray-300",children:[function(e){if(0===e)return"0 B";let t=Math.floor(Math.log(e)/Math.log(1024));return"".concat(parseFloat((e/Math.pow(1024,t)).toFixed(1))," ").concat(["B","KB","MB","GB"][t])}(e.size)," • ",new Date(e.lastModified).toLocaleDateString()]})]}),(0,a.jsx)("button",{onClick:()=>s(f+t),className:"text-red-500 hover:text-red-700 dark:hover:text-red-400",children:"✕"})]},t))}),m>1&&(0,a.jsx)("div",{className:"flex justify-center mt-4 space-x-2",children:Array.from({length:m},(e,t)=>(0,a.jsx)("button",{onClick:()=>n(t+1),className:"px-3 py-1 rounded ".concat(r===t+1?"bg-blue-500 text-white":"bg-gray-200 dark:bg-gray-700 dark:text-gray-300"),children:t+1},t))})]})}},9556:function(e,t,r){"use strict";r.d(t,{p:function(){return FileUpload}});var a=r(7437),o=r(2265);function FileUpload(e){let{onUpload:t,options:r,accept:l=".pdf",onProgress:n,isProcessing:s=!1,processingText:i="Processing..."}=e,[d,c]=(0,o.useState)(!1),[u,p]=(0,o.useState)(""),[h,g]=(0,o.useState)(0),[x,m]=(0,o.useState)(!1),f=(0,o.useRef)(null),handleFile=async e=>{c(!0),p("");try{await t(e)}catch(e){p(e instanceof Error?e.message:"Upload failed")}finally{c(!1)}},handleDrop=async e=>{e.preventDefault(),e.stopPropagation(),m(!1);let r=Array.from(e.dataTransfer.files),a=r.filter(e=>"application/pdf"===e.type);if(0===a.length){p("Please drop PDF files only");return}try{c(!0),p(""),await t(a[0])}catch(e){p(e instanceof Error?e.message:"Upload failed")}finally{c(!1)}};return(0,a.jsxs)("div",{className:"w-full",children:[(0,a.jsxs)("div",{onClick:()=>{var e;return!s&&(null===(e=f.current)||void 0===e?void 0:e.click())},onDragOver:e=>{e.preventDefault(),e.stopPropagation(),x||s||m(!0)},onDragEnter:e=>{e.preventDefault(),e.stopPropagation(),s||m(!0)},onDragLeave:e=>{e.preventDefault(),e.stopPropagation();let t=e.currentTarget.getBoundingClientRect(),r=e.clientX-t.left,a=e.clientY-t.top;(r<0||a<0||r>t.width||a>t.height)&&m(!1)},onDrop:handleDrop,className:"\n          w-full p-8 border-2 border-dashed rounded-lg \n          transition-all duration-200 ease-in-out\n          ".concat(x?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-300 hover:border-blue-500 dark:border-gray-600","\n          ").concat(s||d?"opacity-75 cursor-wait":"cursor-pointer hover:shadow-lg hover:scale-105","\n        "),children:[(0,a.jsx)("input",{ref:f,type:"file",className:"hidden",accept:l,onChange:e=>{var t;let r=null===(t=e.target.files)||void 0===t?void 0:t[0];r&&handleFile(r)},disabled:d||s}),(0,a.jsxs)("div",{className:"text-center space-y-4",children:[(0,a.jsx)("div",{className:"text-5xl",children:x?"\uD83D\uDCC4":"\uD83D\uDCC1"}),(0,a.jsx)("div",{className:"text-lg",children:d||s?i||"Processing... ".concat(h,"%"):x?"Drop your PDF here":"Drag & drop your PDF here or click to browse"}),(0,a.jsx)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Supports PDF files up to 10MB"})]}),(d||s)&&(0,a.jsx)("div",{className:"w-full h-2 bg-gray-200 dark:bg-gray-700 rounded-full mt-4",children:(0,a.jsx)("div",{className:"h-full bg-blue-600 rounded-full transition-all duration-300",style:{width:"".concat(h,"%")}})})]}),u&&(0,a.jsx)("div",{className:"mt-4 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg text-red-600 dark:text-red-400",children:u})]})}},4033:function(e,t,r){e.exports=r(290)}},function(e){e.O(0,[304,971,864,744],function(){return e(e.s=45)}),_N_E=e.O()}]);