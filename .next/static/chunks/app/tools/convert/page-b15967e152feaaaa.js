(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[276],{3958:function(e,t,r){Promise.resolve().then(r.bind(r,8441))},8441:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return ConvertPage}});var a=r(7437),s=r(9556),l=r(2265);function ConvertPage(){let[e,t]=(0,l.useState)("pdf"),[r,o]=(0,l.useState)(""),[n,i]=(0,l.useState)(0),[d,c]=(0,l.useState)(!1),[u,m]=(0,l.useState)(".jpg,.jpeg,.png"),[p,f]=(0,l.useState)(0),[g,x]=(0,l.useState)(!1),[h,b]=(0,l.useState)(""),[v,y]=(0,l.useState)(!1);(0,l.useEffect)(()=>{let e=parseInt(localStorage.getItem("conversionCount")||"0");f(e),x(e>=3)},[]);let j=[{value:"pdf",label:"PDF from Images",accept:".jpg,.jpeg,.png"},{value:"docx",label:"Word Document (.docx)",accept:".pdf"}];(0,l.useEffect)(()=>{let t=j.find(t=>t.value===e);m((null==t?void 0:t.accept)||".pdf")},[e]);let handleSubscribe=async e=>{e.preventDefault(),y(!0);try{await new Promise(e=>setTimeout(e,1e3)),localStorage.setItem("isSubscribed","true"),x(!1)}catch(e){o("فشل في الاشتراك. الرجاء المحاولة مرة أخرى.")}finally{y(!1)}},handleConvert=async t=>{if(p>=3&&!localStorage.getItem("isSubscribed")){x(!0);return}c(!0),o(""),i(0);try{let r=new FormData;r.append("file",t),r.append("format",e),r.append("isImageToPdf",String("pdf"===e)),console.log("Starting conversion...",{format:e,fileSize:t.size,fileName:t.name,isImageToPdf:"pdf"===e});let a=new AbortController,s=setTimeout(()=>a.abort(),3e5),l=await fetch("/api/convert",{method:"POST",body:r,headers:{Accept:"application/json"},signal:a.signal}).finally(()=>clearTimeout(s));if(!l.ok){let e=await l.json();throw console.error("API Error:",e),Error(e.error||"حدث خطأ في التحويل")}let o=await l.blob(),n=window.URL.createObjectURL(o),i=document.createElement("a");i.href=n;let d=l.headers.get("content-disposition"),c=d?decodeURIComponent(d.split("filename*=UTF-8''")[1]):"converted.".concat(e);i.download=c,document.body.appendChild(i),i.click(),window.URL.revokeObjectURL(n),i.remove();let u=p+1;f(u),localStorage.setItem("conversionCount",u.toString()),u>=3&&!localStorage.getItem("isSubscribed")&&x(!0)}catch(e){console.error("Conversion error:",e),"AbortError"===e.name?o("عملية التحويل استغرقت وقتاً طويلاً. يرجى المحاولة مرة أخرى بملف أصغر حجماً"):e.message.includes("ENOTFOUND")?o("فشل الاتصال بخدمة التحويل. يرجى التحقق من اتصال الإنترنت الخاص بك"):e.message.includes("413")?o("حجم الملف كبير جداً. الحد الأقصى هو 10 ميجابايت"):o(e.message||"حدث خطأ غير متوقع. الرجاء المحاولة مرة أخرى"),setTimeout(()=>o(""),8e3)}finally{c(!1),i(0)}};return(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,a.jsx)("nav",{className:"bg-white shadow-sm fixed top-0 left-0 right-0 z-10",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"flex justify-between h-16",children:[(0,a.jsx)("div",{className:"flex-shrink-0 flex items-center",children:(0,a.jsx)("h1",{className:"text-xl font-bold text-gray-800",children:"PDF Tools"})}),(0,a.jsx)("div",{className:"flex items-center",children:!localStorage.getItem("isSubscribed")&&(0,a.jsxs)("span",{className:"hidden sm:block text-sm text-gray-600 text-right",dir:"rtl",children:["التحويلات المتبقية: ",3-p]})})]})})}),(0,a.jsx)("main",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"max-w-xl mx-auto pt-24 sm:pt-28 pb-12",children:[(0,a.jsx)("h2",{className:"text-2xl sm:text-3xl font-bold mb-6 sm:mb-8 text-center",children:"pdf"===e?"Convert Images to PDF":"Convert PDF"}),(0,a.jsxs)("div",{className:"mb-6 sm:mb-8",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2 sm:mb-3",children:"pdf"===e?"Convert from:":"Convert to:"}),(0,a.jsx)("select",{value:e,onChange:e=>t(e.target.value),className:"w-full px-4 py-2 sm:py-3 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-yellow-300 transition duration-300",disabled:d,children:j.map(e=>(0,a.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,a.jsx)("div",{className:"mb-6 sm:mb-8",children:(0,a.jsx)(s.p,{onUpload:handleConvert,options:{type:"convert",settings:{outputFormat:e,isImageToPdf:"pdf"===e}},accept:u,onProgress:e=>{i(e)},isProcessing:d,processingText:"جاري التحويل... ".concat(n,"%")})}),r&&(0,a.jsx)("div",{className:"mb-6 sm:mb-8",children:(0,a.jsx)("div",{className:"p-3 sm:p-4 bg-red-100 text-red-700 rounded-lg text-right",dir:"rtl",children:r})}),g&&(0,a.jsx)("div",{className:"mb-6 sm:mb-8",children:(0,a.jsxs)("div",{className:"p-6 sm:p-8 bg-yellow-50 border border-yellow-200 rounded-lg",children:[(0,a.jsx)("h3",{className:"text-xl font-bold text-gray-800 mb-4 text-right",children:"لقد استخدمت الحد الأقصى للتحويلات المجانية"}),(0,a.jsx)("p",{className:"text-gray-600 mb-4 text-right",children:"للاستمرار في استخدام الخدمة، يرجى الاشتراك عن طريق إدخال بريدك الإلكتروني"}),(0,a.jsxs)("form",{onSubmit:handleSubscribe,className:"space-y-4",children:[(0,a.jsx)("input",{type:"email",value:h,onChange:e=>b(e.target.value),placeholder:"البريد الإلكتروني",className:"w-full px-4 py-2 sm:py-3 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-yellow-300",required:!0,dir:"rtl"}),(0,a.jsx)("button",{type:"submit",disabled:v,className:"w-full bg-yellow-500 hover:bg-yellow-600 text-white font-bold py-2 sm:py-3 px-4 rounded-lg transition duration-300 disabled:opacity-50",children:v?"جاري الاشتراك...":"اشترك الآن"})]})]})}),!g&&!localStorage.getItem("isSubscribed")&&(0,a.jsx)("div",{className:"sm:hidden mb-6",children:(0,a.jsxs)("p",{className:"text-sm text-gray-600 text-center",dir:"rtl",children:["التحويلات المتبقية: ",3-p]})}),(0,a.jsxs)("div",{className:"text-sm text-gray-600 bg-white p-4 sm:p-6 rounded-lg shadow-sm",children:[(0,a.jsx)("h2",{className:"font-semibold mb-3 text-lg",children:"Instructions:"}),(0,a.jsxs)("ul",{className:"list-disc list-inside space-y-2",children:[(0,a.jsx)("li",{children:"pdf"===e?"Select images (.jpg, .jpeg, .png) to convert to PDF":"Upload a PDF file to convert to the selected format"}),(0,a.jsx)("li",{children:"Maximum file size: 10MB"}),(0,a.jsx)("li",{children:"The converted file will automatically download once ready"})]})]})]})})]})}},9556:function(e,t,r){"use strict";r.d(t,{p:function(){return FileUpload}});var a=r(7437),s=r(2265);function FileUpload(e){let{onUpload:t,options:r,accept:l=".pdf",onProgress:o,isProcessing:n=!1,processingText:i="Processing..."}=e,[d,c]=(0,s.useState)(!1),[u,m]=(0,s.useState)(""),[p,f]=(0,s.useState)(0),[g,x]=(0,s.useState)(!1),h=(0,s.useRef)(null),handleFile=async e=>{c(!0),m("");try{await t(e)}catch(e){m(e instanceof Error?e.message:"Upload failed")}finally{c(!1)}},handleDrop=async e=>{e.preventDefault(),e.stopPropagation(),x(!1);let r=Array.from(e.dataTransfer.files),a=r.filter(e=>"application/pdf"===e.type);if(0===a.length){m("Please drop PDF files only");return}try{c(!0),m(""),await t(a[0])}catch(e){m(e instanceof Error?e.message:"Upload failed")}finally{c(!1)}};return(0,a.jsxs)("div",{className:"w-full",children:[(0,a.jsxs)("div",{onClick:()=>{var e;return!n&&(null===(e=h.current)||void 0===e?void 0:e.click())},onDragOver:e=>{e.preventDefault(),e.stopPropagation(),g||n||x(!0)},onDragEnter:e=>{e.preventDefault(),e.stopPropagation(),n||x(!0)},onDragLeave:e=>{e.preventDefault(),e.stopPropagation();let t=e.currentTarget.getBoundingClientRect(),r=e.clientX-t.left,a=e.clientY-t.top;(r<0||a<0||r>t.width||a>t.height)&&x(!1)},onDrop:handleDrop,className:"\n          w-full p-8 border-2 border-dashed rounded-lg \n          transition-all duration-200 ease-in-out\n          ".concat(g?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-300 hover:border-blue-500 dark:border-gray-600","\n          ").concat(n||d?"opacity-75 cursor-wait":"cursor-pointer hover:shadow-lg hover:scale-105","\n        "),children:[(0,a.jsx)("input",{ref:h,type:"file",className:"hidden",accept:l,onChange:e=>{var t;let r=null===(t=e.target.files)||void 0===t?void 0:t[0];r&&handleFile(r)},disabled:d||n}),(0,a.jsxs)("div",{className:"text-center space-y-4",children:[(0,a.jsx)("div",{className:"text-5xl",children:g?"\uD83D\uDCC4":"\uD83D\uDCC1"}),(0,a.jsx)("div",{className:"text-lg",children:d||n?i||"Processing... ".concat(p,"%"):g?"Drop your PDF here":"Drag & drop your PDF here or click to browse"}),(0,a.jsx)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Supports PDF files up to 10MB"})]}),(d||n)&&(0,a.jsx)("div",{className:"w-full h-2 bg-gray-200 dark:bg-gray-700 rounded-full mt-4",children:(0,a.jsx)("div",{className:"h-full bg-blue-600 rounded-full transition-all duration-300",style:{width:"".concat(p,"%")}})})]}),u&&(0,a.jsx)("div",{className:"mt-4 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg text-red-600 dark:text-red-400",children:u})]})}},622:function(e,t,r){"use strict";/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var a=r(2265),s=Symbol.for("react.element"),l=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,n=a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function q(e,t,r){var a,l={},d=null,c=null;for(a in void 0!==r&&(d=""+r),void 0!==t.key&&(d=""+t.key),void 0!==t.ref&&(c=t.ref),t)o.call(t,a)&&!i.hasOwnProperty(a)&&(l[a]=t[a]);if(e&&e.defaultProps)for(a in t=e.defaultProps)void 0===l[a]&&(l[a]=t[a]);return{$$typeof:s,type:e,key:d,ref:c,props:l,_owner:n.current}}t.Fragment=l,t.jsx=q,t.jsxs=q},7437:function(e,t,r){"use strict";e.exports=r(622)}},function(e){e.O(0,[971,864,744],function(){return e(e.s=3958)}),_N_E=e.O()}]);